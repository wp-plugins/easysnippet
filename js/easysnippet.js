(function(s){var v,p=0,o=0,e=false,x=1,G,u,r=-1;var B,q,A,C,J,f,j,E,a="RSTRetrieving";var H=".RSTGoogleResult",d=/^RSTPost_([0-9]+)$/,g,c;var b={},i=[];function m(O){var M,L;var K;var N=s.parseJSON(O);if(N.length===0){f.hide();j.hide();E.show();J.hide();return}v=[];i=[];for(M=0;M<N.length;M++){K=N[M];L=q.clone();L.attr("id","RSTPost_"+K.ID);s(".RSTPostTitle",L).html(K.postTitle);if(M%2===1){L.css("background-color","#eaffff")}A.append(L);v.push(L);b[K.ID]=K.postURL;i.push(K.ID)}o=K.ID;p=0;if(p<v.length){K=v[p];K.find(".RSTStatusBox").addClass(a)}B()}function n(){}function k(){if(e){return}s.ajax({url:c.ajaxURL,type:"POST",data:{action:"easysnippetGet",seq:G,last:o},success:m,error:n})}function w(ab){var K,V,X,Q=s.parseJSON(ab);var U,W,M;X=s(Q.html);var N=X.find("#ires .vsc");var P=s("#"+Q.id);var O=s(H,P);W=P.find(".RSTStatusBox");W.removeClass(a);U=P.find(".RSTStatus");if(N.length===0){U.text("No snippet data returned from Google");U.css("color","#f99")}else{var L=N.find("h3.r");L=L.text();var S=N.find(".s");var R=S.html();var aa="<h3>"+L+'</h3><div class="s">'+R+"</div>";var Z=P.find(".RSTResult");W.hide();Z.html(aa).show();var T=X.find(".warning-message");M=P.outerHeight();var Y=Z.outerHeight();Z.css("top",(M-Y)/2+"px")}p++;if(p<v.length){V=v[p];if(e){return}V.find(".RSTStatusBox").addClass(a);r=setTimeout(B,u);return}x++;K="RSTTab_"+x;A=s('<div id="'+K+'" class="RSTPosts">');C.append(A);C.tabs("add","#"+K,x);C.tabs("select",x-1);if(e){return}k()}function I(){var K,M,L;if(e){return}if(p>=v.length){k();return}L=v[p];K=b[i[p]];M=L.attr("id");s.ajax({url:c.ajaxURL,type:"POST",data:{action:"easysnippetTest",url:K,id:M},success:w,error:n})}function l(){var L,M,K=C.tabs("length");J.hide();j.hide();E.hide();f.show();for(L=0;L<K;L++){C.tabs("remove",0)}p=0;o=0;x=1;M="RSTTab_"+x;A=s('<div id="'+M+'" class="RSTPosts">');C.append(A);C.tabs("add","#"+M,x);C.tabs("select",x-1);e=false;G=s("#inpRSTSequence").val();if(G!=="0"){o=999999}u=s("#inpRSTDelay").val()*1000;k()}function h(){clearTimeout(r);e=true;f.hide();j.show();E.show();s(".RSTPosts .RSTPost .RSTRetrieving").each(function(){s(this).removeClass(a)})}function F(){J.hide();j.hide();E.hide();f.show();e=false;I()}function t(){var L,K,O,N,M=s(this);N=M.parentsUntil(".RSTPosts",".RSTPost");L=d.exec(N.attr("id"));O=(L!==null)?L[1]:0;K=b[O];if(M.hasClass("RSTBtnEdit")){window.open("/wp-admin/post.php?post="+O+"&action=edit")}else{if(M.hasClass("RSTBtnShow")){window.open(K)}else{if(M.hasClass("RSTBtnGoogle")){window.open("http://www.google.com/webmasters/tools/richsnippets?url="+encodeURIComponent(K))}}}}function y(){s(".RSTOverlay",this).show()}function z(){s(".RSTOverlay",this).hide()}function D(){c=RICHSNIPPET;C=s("#divRSTTabs");C.tabs({selected:0});A=s(".RSTPosts");q=s(".divRSTPostHTML .RSTPost");s("button",q).button();g=s("#divRSTContainer");J=g.find(".btnStart");f=g.find(".btnStop");j=g.find(".btnContinue");E=g.find(".btnReRun");J.click(l);f.click(h);j.click(F);E.click(l);C.on("mouseover",".RSTPost",y);C.on("mouseout",".RSTPost",z);C.on("click",".RSTBtn",t);B=I}s(D)}(jQuery));